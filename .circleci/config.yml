version: 2.1

jobs:
  build: # name of your job
    machine: # executor type
      image: ubuntu-2004:202010-01
    steps:
      - checkout
      - run: |
            sudo apt update -y
            sudo apt install awscli -y 
            echo -e "$AWS_ACCESS_KEY_ID\n$AWS_SECRET_ACCESS_KEY\nus-east-1\n\n" | aws configure
            sudo apt install maven -y
      - run: |
             docker build -t "$AWS_ECR_ACCOUNT_URL/genie-ci:latest" .
             
             
             
workflows:
  version: 2
  build-test-and-deploy:
    jobs:
      - build
